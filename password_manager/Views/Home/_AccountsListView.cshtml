@using PasswordManager.Models
@model IEnumerable<AccountModel>

@if (Model.Count() == 0)
{
    <p>Couldn't find any accounts with this filter query.</p>
}
else
{
    <div class="table-responsive">
        <table class="table mb-4">
            <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Title</th>
                    <th scope="col">Username</th>
                    <th scope="col">Password</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var account in Model)
                {
                    <tr>
                        <th scope="row">@account.accountId</th>
                        <td>@account.title</td>
                        <td>@account.username</td>
                        <td class='text-wrap' style="wordBreak: 'break-all';">
                            <input
                                id=@account.title
                                value=@account.password
                                type="password"
                                readOnly
                            />
                        </td>
                        <td>
                            <button
                                type="submit"
                                class="btn btn-primary ms-1"
                                onClick="toggleVisible(@account.title)"
                            >
                                Toggle
                            </button>

                            @* WHY IS IT THAT WE CANNOT PASS ACCOUNTMODEL OBJECT BACK UP? *@
                            @Html.ActionLink("Delete", "Delete", "Home", new {userId=account.userId, accountId=account.accountId}, new {
                                @class="btn btn-danger",
                                onClick="return confirm('Are you sure you want to delete this password account?')"
                            })


                            @Html.ActionLink("Edit", "Edit", "Home", new {accountId=account.accountId, userId=account.userId}, new {@class="btn btn-warning"})

                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}